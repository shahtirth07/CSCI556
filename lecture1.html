<!DOCTYPE html>
<html>

<head>
<title>Title</title>

<script src="https://www.ecst.csuchico.edu/~oal-saadi/Graphics/lib/webgl-utils.js"></script>
<script src="https://www.ecst.csuchico.edu/~oal-saadi/Graphics/lib/webgl-debug.js"></script>
<script src="https://www.ecst.csuchico.edu/~oal-saadi/Graphics/lib/cuon-matrix.js"></script>
<script src="https://www.ecst.csuchico.edu/~oal-saadi/Graphics/lib/cuon-utils.js"></script>

<script> 
//Javascript Code Here!
var VSHADER_SOURCE =
  'attribute vec4 a_Position;\n' +
  'uniform float u_CosB , u_SinB;\n' +
  'void main() {\n' +
  //'  gl_Position = a_Position;\n' +
    '  gl_Position.x = a_Position.x * u_CosB - a.Position.y * u_SinB;\n' +
    '  gl_Position.y = a_Position.y * u_SinB + a.Position.y * u_CosB;\n' +
    '  gl_Position.z = a_Position.z;\n' +
    '  gl_Position.w = a_Position.w;\n' +
  '  gl_PointSize = 10.0; \n' +
  '}\n';

// Fragment shader program
var FSHADER_SOURCE =
  'void main() {\n' +
  '  gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n' +
  '}\n';
function main(){
    console.log("Hello World");
    var canvas = document.getElementById('webgl');
    var gl = getWebGLContext(canvas);

    var ANGLE = 0.0;

    initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE);

    var radians = Math.PI * ANGLE / 180.0;
    var cosB = Math.cos(radians);
    var sinB = Math.sin(radians);

    var u_CosB = gl.getUniformLocation(gl.program, 'u_CosB');
    var u_SinB = gl.getUniformLocation(gl.program, 'u_SinB');
    gl.uniform1f(u_CosB, cosB);
    gl.uniform1f(u_SinB, sinB);

    initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE);
    var n = initVertexBuffers(gl);
    var tick = function(){
        ANGLE += 0.01;
   
    gl.clearColor(0,0,0,1);
    gl.clear(gl.COLOR_BUFFER_BIT);

    gl.drawArrays(gl.TRIANGLES, 0, n);

    requestAnimationFrame(tick,canvas);
    };
    tick();

    function initVertexBuffers(gl){
        var vertices = new Float32Array([
    0, 0,   -0.5, -0.5,   0.5, -0.5 //top, left, right corners
  ]);
  var n = 3; // The number of vertices

  // Create a buffer object (line 1)
  // Bind the buffer object to target (line 2)
  // Write date into the buffer object (line 3)
  var vertexBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

  //Get storage location of a_Position (line 1)
  // Assign the buffer object to a_Position variable (line 2)
  var a_Position = gl.getAttribLocation(gl.program, 'a_Position');
  gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);
                                   //2 because 2 dimensions

  // Enable the assignment to a_Position variable
  gl.enableVertexAttribArray(a_Position);

  return n;
    }
}

</script>

</head>

<!-- When page loads, call main() in Javascript. -->
<body onload="main();">

<!-- The Window that displays graphics. -->
<canvas id="webgl" width="400" height="400"></canvas>

<br> <!-- Newline -->

<!-- Pressing this button calls function action()" in the
Javascript of the script tag. -->
<button type="button" onclick="action()">Button</button>

</body>
</html>
